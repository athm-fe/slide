/*!
 * @autofe/slide v0.1.0
 * (c) 2018 Autohome Inc.
 * Released under the MIT License.
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],e):(t.AutoFE=t.AutoFE||{},t.AutoFE.Slide=e(t.jQuery))}(this,function(t){"use strict";t=t&&t.hasOwnProperty("default")?t.default:t;var e="slide",i="fe.slide",s="."+i,n=t.fn[e],o={INIT:"init"+s,SLIDE:"slide"+s,SLID:"slid"+s,KEYDOWN:"keydown"+s,MOUSEENTER:"mouseenter"+s,MOUSELEAVE:"mouseleave"+s,TOUCHEND:"touchend"+s,CLICK:"click"+s,CLICK_DATA_API:"click"+s+".data-api"},r='[data-toggle="slide"]';function h(e,i){this.options=i,this.$elem=t(e),this.$track=t(this.options.slideTrack,this.$elem),this.$item=t(this.options.slideItem,this.$elem),this.$title=t(this.options.slideTitle,this.$elem),this.$indicators=t(this.options.slideIndicators,this.$elem),this.$indicatorItem=t("a",this.$indicators),this.$prev=t(this.options.slidePrev,this.$elem),this.$next=t(this.options.slideNext,this.$elem),this.number=1,this.buzy=!1,this.isMouseEnter=!1,this.adjustObj=null,this.size=this.$item.first().width(),this.init()}function a(e){return this.each(function(){var s=t(this),n=s.data(i),o=t.extend({},h.Default,s.data(),"object"==typeof e&&e);if(n||(n=new h(this,o),s.data(i,n)),"string"==typeof e){if("undefined"==typeof n[e])throw new TypeError('No method named "'+e+'"');n[e]()}else"number"==typeof e&&n.go(e)})}return h.Default={duration:400,interval:5e3,autoplay:!0,keyboard:!1,pause:"hover",toggleButton:!1,slideTrack:".athm-slide__track,[data-slide-track]",slideItem:".athm-slide__item,[data-slide-item]",slideTitle:".athm-slide__title,[data-slide-title]",slideIndicators:".athm-slide__indicators,[data-slide-indicators]",slidePrev:".athm-slide__prev,[data-slide-prev]",slideNext:".athm-slide__next,[data-slide-next]"},h.prototype.init=function(){var e=this;if(e.$item.length<=1)return e.$indicators.hide(),e.$prev.hide(),void e.$next.hide();e.$elem.trigger(o.INIT,e),"hover"===e.options.pause&&e.$elem.on(o.MOUSEENTER,function(){e.isMouseEnter=!0}).on(o.MOUSELEAVE,function(){e.isMouseEnter=!1}),!0===e.options.toggleButton&&e.$elem.hover(function(){e.$prev.show(),e.$next.show()},function(){e.$prev.hide(),e.$next.hide()}),e.$prev.on(o.CLICK,t.proxy(e.prev,e)),e.$next.on(o.CLICK,t.proxy(e.next,e)),e.$indicatorItem.on(o.CLICK,function(){if(!e.buzy){var i=e.$indicatorItem.index(t(this))+1;e.go(i)}}),e.options.keyboard&&t(document).on(o.KEYDOWN,function(t){switch(t.which){case 37:e.prev();break;case 39:e.next()}}),document.hasOwnProperty&&document.hasOwnProperty("ontouchstart")&&e.$elem.on("touchstart.fe.slide",function(t){t=t.originalEvent,e.__touch_isDrag=!0,t.targetTouches?(e.__touch_startX=t.targetTouches[0].clientX,e.__touch_startY=t.targetTouches[0].clientY):(e.__touch_startX=t.clientX,e.__touch_startY=t.clientY)}).on("touchmove.fe.slide",function(t){t=t.originalEvent,e.__touch_isDrag&&(t.targetTouches?(e.__touch_endX=t.targetTouches[0].clientX,e.__touch_endY=t.targetTouches[0].clientY):(e.__touch_endX=t.clientX,e.__touch_endY=t.clientY),Math.abs(e.__touch_endX-e.__touch_startX)>Math.abs(e.__touch_endY-e.__touch_startY)?(e.__touch_horizontal=!0,t.preventDefault()):e.__touch_horizontal=!1)}).on("touchend.fe.slide",function(){e.__touch_horizontal&&e.__touch_endX&&(e.__touch_endX-e.__touch_startX>100?t.proxy(e.prev,e)():e.__touch_endX-e.__touch_startX<-100&&t.proxy(e.next,e)()),e.__touch_isDrag=!1,e.__touch_startX=null,e.__touch_startY=null,e.__touch_endX=null,e.__touch_endY=null}),e.$track.css("left",0),!0===e.options.autoplay&&e.play()},h.prototype.next=function(){if(!this.buzy){if(this.buzy=!0,this.number++,this.number>this.$item.length){this.$track.css("left",this.size);var t=this.$item.last();this._adjustPosition(t,-this.$item.length*this.size),this.number=1}this._setPoint(),this._animate()}},h.prototype.prev=function(){if(!this.buzy){if(this.buzy=!0,this.number--,this.number<=0){this.$track.css("left",-this.$item.length*this.size);var t=this.$item.first();this._adjustPosition(t,this.$item.length*this.size),this.number=this.$item.length}this._setPoint(),this._animate()}},h.prototype.go=function(t){this.number!==t&&(this.number=this.number>t?t+1:t-1,this[this.number>t?"prev":"next"]())},h.prototype.play=function(){var t=this;this.interval&&clearInterval(this.interval),this.buzy=!1,this.interval=setInterval(function(){!t.isMouseEnter&&t.next()},this.options.interval)},h.prototype.pause=function(){this.interval&&clearInterval(this.interval)},h.prototype._setPoint=function(){var t="active";this.$elem.trigger(o.SLIDE,this),this.$indicatorItem.removeClass(t).eq(this.number-1).addClass(t);var e=this.$item.eq(this.number-1).find("img[title]"),i=e.attr("title");if(i){var s=e.parent("a")[0];s?s=s.cloneNode():(s=document.createElement("a")).href="javascript:void(0)",s.innerHTML=i,this.$title.html(s.outerHTML)}},h.prototype._animate=function(){var t=this,e=t.options.duration;t.$track.animate({left:-(t.number-1)*t.size},e,function(){t._resetPosition(),t.buzy=!1,t.$elem.trigger(o.SLID,t)})},h.prototype._adjustPosition=function(t,e){this.adjustObj={elem:t,position:t.css("position"),left:t.css("left")},t.css({position:"relative",left:e})},h.prototype._resetPosition=function(){this.adjustObj&&(this.adjustObj.elem.css({position:this.adjustObj.position,left:this.adjustObj.left}),this.adjustObj=null)},t(function(){a.call(t(r))}),t.fn[e]=a,t.fn[e].Constructor=h,t.fn[e].noConflict=function(){return t.fn[e]=n,a},h});