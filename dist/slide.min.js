/*!
 * @autofe/slide v0.3.0
 * (c) 2018 Autohome Inc.
 * Released under the MIT License.
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],e):(t.AutoFE=t.AutoFE||{},t.AutoFE.Slide=e(t.jQuery))}(this,function(t){"use strict";t=t&&t.hasOwnProperty("default")?t.default:t;var e="slide",i="fe.slide",s="."+i,o=t.fn[e],n="next",r="prev",a={INIT:"init"+s,SLIDE:"slide"+s,SLID:"slid"+s,FIRST_SLIDE:"firstSlide"+s,FIRST_SLID:"firstSlid"+s,LAST_SLIDE:"lastSlide"+s,LAST_SLID:"lastSlid"+s,KEYDOWN:"keydown"+s,MOUSEENTER:"mouseenter"+s,MOUSELEAVE:"mouseleave"+s,TOUCHSTART:"touchstart"+s,TOUCHMOVE:"touchmove"+s,TOUCHEND:"touchend"+s,CLICK:"click"+s},h='[data-toggle="slide"]';function l(e,i){this.options=i,this.$elem=t(e),this.$track=t(this.options.slideTrack,this.$elem),this.$item=t(this.options.slideItem,this.$elem),this.$title=t(this.options.slideTitle,this.$elem),this.$indicators=t(this.options.slideIndicators,this.$elem),this.$prev=t(this.options.slidePrev,this.$elem),this.$next=t(this.options.slideNext,this.$elem),this.number=1,this.buzy=!1,this.isMouseEnter=!1,this.adjustObj=null,this.init()}function u(e){return this.each(function(){var s=t(this),o=s.data(i),n=t.extend({},l.Default,s.data(),"object"==typeof e&&e);if(o||(o=new l(this,n),s.data(i,o)),"string"==typeof e){if("undefined"==typeof o[e])throw new TypeError('No method named "'+e+'"');o[e]()}else"number"==typeof e&&o.go(e)})}return l.Default={duration:400,interval:5e3,circle:!0,autoplay:!0,keyboard:!1,pause:"hover",toggleButton:!1,autoIndicators:!1,slideTrack:".athm-slide__track,[data-slide-track]",slideItem:".athm-slide__item,[data-slide-item]",slideTitle:".athm-slide__title,[data-slide-title]",slideIndicators:".athm-slide__indicators,[data-slide-indicators]",slidePrev:".athm-slide__prev,[data-slide-prev]",slideNext:".athm-slide__next,[data-slide-next]",disabledClass:"disabled"},l.prototype.init=function(){var e=this;if(e.$item.length<=1)return e.$indicators.hide(),e.$prev.hide(),void e.$next.hide();if(e.$elem.trigger(a.INIT,e),"hover"===e.options.pause&&e.$elem.on(a.MOUSEENTER,function(){e.isMouseEnter=!0}).on(a.MOUSELEAVE,function(){e.isMouseEnter=!1}),!0===e.options.toggleButton&&e.$elem.hover(function(){e.$prev.show(),e.$next.show()},function(){e.$prev.hide(),e.$next.hide()}),e.$prev.on(a.CLICK,t.proxy(e.prev,e)),e.$next.on(a.CLICK,t.proxy(e.next,e)),e.options.autoIndicators){for(var i=[],s=0,o=e.$item.length;s<o;s++)i.push('<a href="javascript:void(0)"></a>');e.$indicators.html(i.join(" "))}e.$indicators.on(a.CLICK,"a",function(){if(!e.buzy){var t=e.$indicators.find("a").index(this)+1;e.go(t)}}),e.options.keyboard&&t(document).on(a.KEYDOWN,function(t){switch(t.which){case 37:e.prev();break;case 39:e.next()}}),"ontouchstart"in window&&e.$elem.on(a.TOUCHSTART,function(t){t=t.originalEvent,e.__touch_isDrag=!0,t.targetTouches?(e.__touch_startX=t.targetTouches[0].clientX,e.__touch_startY=t.targetTouches[0].clientY):(e.__touch_startX=t.clientX,e.__touch_startY=t.clientY)}).on(a.TOUCHMOVE,function(t){t=t.originalEvent,e.__touch_isDrag&&(t.targetTouches?(e.__touch_endX=t.targetTouches[0].clientX,e.__touch_endY=t.targetTouches[0].clientY):(e.__touch_endX=t.clientX,e.__touch_endY=t.clientY),Math.abs(e.__touch_endX-e.__touch_startX)>Math.abs(e.__touch_endY-e.__touch_startY)?(e.__touch_horizontal=!0,t.preventDefault()):e.__touch_horizontal=!1)}).on(a.TOUCHEND,function(){e.__touch_horizontal&&e.__touch_endX&&(e.__touch_endX-e.__touch_startX>100?t.proxy(e.prev,e)():e.__touch_endX-e.__touch_startX<-100&&t.proxy(e.next,e)()),e.__touch_isDrag=!1,e.__touch_startX=null,e.__touch_startY=null,e.__touch_endX=null,e.__touch_endY=null}),e.$track.css("left",0),e._setPoint(),e.options.circle||1!==e.number||e.$prev.addClass(this.options.disabledClass),!0===e.options.autoplay&&e.play()},l.prototype.next=function(){this.buzy||this._slide(n,this.number+1)},l.prototype.prev=function(){this.buzy||this._slide(r,this.number-1)},l.prototype.go=function(t){if(!(t>this.$item.length||t<1||t===this.number||this.buzy)){var e=t>this.number?n:r;this._slide(e,t)}},l.prototype.play=function(){var t=this;this.interval&&clearInterval(this.interval),this.buzy=!1,this.interval=setInterval(function(){!t.isMouseEnter&&t.next()},this.options.interval)},l.prototype.pause=function(){this.interval&&clearInterval(this.interval)},l.prototype._setPoint=function(){var t="active";this.$indicators.find("a").removeClass(t).eq(this.number-1).addClass(t);var e=this.$item.eq(this.number-1).find("img[title]"),i=e.attr("title");if(i&&this.$title.length>0){var s=e.parent("a")[0];s?s=s.cloneNode():(s=document.createElement("a")).href="javascript:void(0)",s.innerHTML=i,this.$title.html(s.outerHTML)}},l.prototype._slide=function(t,e){var i=this,s=this.options.duration,o=this.options.disabledClass,h=this.$item.first().width(),l=this.options.circle,u=t===n&&e===this.$item.length,d=t===n&&e>this.$item.length,c=t===r&&1===e,_=t===r&&e<1,p=e;if(l||!_&&!d){if(this.buzy=!0,this.$elem.trigger(a.SLIDE,this),!l&&u?(this.$next.addClass(o),this.$elem.trigger(a.LAST_SLIDE,this),this.pause()):this.$next.removeClass(o),!l&&c?(this.$prev.addClass(o),this.$elem.trigger(a.FIRST_SLIDE,this)):this.$prev.removeClass(o),d){this.$track.css("left",h);var f=this.$item.last();this._adjustPosition(f,-this.$item.length*h),p=1}else if(_){this.$track.css("left",-this.$item.length*h);var m=this.$item.first();this._adjustPosition(m,this.$item.length*h),p=this.$item.length}this.number=p,this._setPoint(),i.$track.animate({left:-(i.number-1)*h},s,function(){i._resetPosition(),i.buzy=!1,i.$elem.trigger(a.SLID,i),!l&&u?i.$elem.trigger(a.LAST_SLID,i):!l&&c&&i.$elem.trigger(a.FIRST_SLID,i)})}},l.prototype._adjustPosition=function(t,e){this.adjustObj={$elem:t,position:t.css("position"),left:t.css("left")},t.css({position:"relative",left:e})},l.prototype._resetPosition=function(){this.adjustObj&&(this.adjustObj.$elem.css({position:this.adjustObj.position,left:this.adjustObj.left}),this.adjustObj=null)},t(function(){u.call(t(h))}),t.fn[e]=u,t.fn[e].Constructor=l,t.fn[e].noConflict=function(){return t.fn[e]=o,u},l});